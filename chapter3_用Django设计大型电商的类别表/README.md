# 第三章 用Django设计大型电商的类别表

在本章中,我们将要做一个符合数据量庞大的电商平台的类别表。看似使用SQL语句就可以完成的功能需求,其实并没有想象中那么简单。对于如天猫和京东这样数据量庞大的电商类平台来说,类别表内的数据记录是存在层层嵌套的,如果采用传统的构建数据表的方式来完成功能需求,是非常难以实现的。通过本章的学习,我们就可以了解到,如何使用 Django来设计一张数据表,以实现数据量庞大的商品分类需求。

## 3.1 电商类别表的项目功能需求

本节将分析电商“大鳄”的类别表中实现了哪些功能让我们从宏观角度来观察一下大型的企业电商对于类别表的设计思路,从而提升和夯实我们对于数据库设计的水平。相信从这一节中,读者会对数据类别表有一个重新的认识,从而对以后实战项目中的数据库设计,能够做到胸有成竹。

### 3.1.1 类别表需求分析

如图3-1所示,天猫、京东,以及目前国内的一线电商平台,大多都是以这种结构作为首页上方的分类导航界面,将树状分类导航与轮播图镶嵌在一起,这样从网页设计角度上来讲,可以用最少的空间呈现最多的数据信息。
当然,使用 Django主要是分析后端的逻辑,前端的网页设计并不是本书的重点。

大家可以将图3-1与天猫或者京东的首页进行对比査看。如图3-1所示,在轮播图上方是一级类目,包括商品分类及一些业务分类。当我们将光标悬浮在任何一个二级类目上时,就会出现在此二级类目下的三级类目、二级类目所包含领域的一些推荐品牌的Logo,以及在三级类目中比较热门的一些四级类目的搜索内容。

这样听起来似乎有一点绕,我们可以拿天猫来举一个例子。比如图3-1中的一级类目,在天猫中,这些一级类目是“商品分类”“天猫超市”“天猫国际"“喵生鲜”等,二级类目是“女装/内衣”“男装户外运动”"女鞋/男鞋/箱包”等,当我们将光标移动悬浮到某一个二级类目上方时,比如将光标悬浮到"女鞋/男鞋/箱包”这个类目上方,在原本轮播图的上面,就会出现一个新的导航页将其覆盖,而在导航页中分为左、中、右三个结构,左边这一列就是三级类目,比如“推荐女鞋"潮流男鞋”"女单鞋”“特色鞋”等,中间这一列就是四级类目,比如“潮流过膝靴”气质百搭踝靴”"永远的帆布鞋”,右边这一列则是一些品牌Logo,比如“李宁”“耐克”“乔丹”等。总结一下,类别表的设计需求如下：

(1)类别表必须包含多级类目,至少分为四级类目。

(2)类别表每一级类目数据都要有各自类目级别的标注,以便前端进行网页设计。

(3)类别表内的类别数据,必须可以灵活地进行增、减,并且不会因此而改变其上下层级的数据关系。

### 3.1.2 使用Vue.js在前端开发一个电商导航栏项目demo1

在第1章中,我们详细地讲述了什么是前后端分离, 以及在当今技术领域,使用前后端分离面相切面编程的技术模式,来处理多端应用开发的需求。既然是前后端分离,有后端框架ango,当然也要有前端框架。前端框架与后端框架不同,后端框架 Django是为 Python!处理网站后端逻辑而创造出来的, Django之于 Python,就如同Thinkphp之于PHP,,NET之于C#,几乎每一种后端框架,都对应着一种编程语言。但是对于前端框架而言,所有的前端框架,都只对应HTML+CSS+ Javascript语言, 绝大多数的前端框架,都是为了将HTML+CSS+ Javascript工程化而产生的。

Vue. js就是一个前端框架。 Vue. jsl的单页面应用模式对于前端技术的影响非常深远,包括微信小程序在内的很多前端原生语言,都是借鉴了此模式。

Vue. js是一个构建数据驱动的Web界面渐进式框架, 与 Angular和 React并称为前端三大框架,而 Vue. js/框架是由华人尤雨溪所创造,开发文档更适合中国人阅读,而且尤雨溪也已经加盟阿里巴巴,所以Vue-js在国内也得到了

## 3.2 为什么不用传统建表方式建类别表

在3.1.2节中,我们建立了一个前端电商平台导航栏项目demo1。通过demo1项目中App.vue的代码不难看出,在完整的前后端分离项目中,前端的 Vue. JSJ项目,是将网络请求通过API发送给后端项目,从而获取数据并且赋值给前端项目的data,替换原本的data内容。这也是实现前后端分离的基本原理。

在本节中,我们将新建一个 Django后端项目demo2,与前端的 Vue. JS项目demo1组成一个前后端分离项目,通过实际项目中前后端数据之间的调试来解述为什么传统的建表方式无法满足大型电商网站的类别表需求。

注意:传统的建表方式虽然可解决大部分功能需求,但是当遇到诸如大型电商网站类别表这种级别的开发需求时,传统建表方式就显得捉襟见肘了。所以不建议大家跳过此节内容直接看下一节。

### 3.2.1 使用PyCharm新建后端演示项目

见代码

### 3.2.2 完善demo2的后台逻辑代码

见代码

### 3.2.3 前后端项目联合调试

见代码

## 3.3 使用Django的model实现类别表建立





